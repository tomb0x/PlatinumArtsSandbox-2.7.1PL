// Najpierw kilka kopii z menu Sauer, po prostu ratuje mnie przed ich wypisywaniem, przynajmniej je przeformatowałem.

bind ESCAPE [
	do [
		@nokeybind [if (cleargui 1) [] [showgui main]; if $editing [showtexgui -1] []]
		@ctrlkeybind [cleargui; if $editing [showtexgui -1] []]
	]
]

showmapshot = [
	guibar
	guilist [
		if $numargs [
			guiimage (format "packages/base/%1/%2" $arg1 (at $guirollovername 0)) $guirolloveraction 5 1 "data/sandboxlogo"
		] [
			guiimage (format "packages/base/%1" (at $guirollovername 0)) $guirolloveraction 5 1 "data/sandboxlogo"
		]
		guitext $guirollovername
	]
]

maprotation = [
	n = (listlen $arg1)
	loop i $n [
		curmap = (at $arg1 $i)
		next = (mod (+ $i 1) $n)
		nextmap = (at $arg1 $next)
		(if (= $numargs 2) [concatword nextmap_ $arg2 $curmap] [concatword nextmap_ $curmap]) = $nextmap
	]
]

genmapitems = [
	looplist f $arg1 [
		guibutton $f (concat "map " $f)
	]
]

initentgui = [
	tmpt = ( et )
	loop i (getattrnum (et)) [
		alias (concatword tmp $i) (ea $i)
	]
]

guilistsplit = [
	guilist [
		i = 0
		l = (listlen $arg3)
		z = (div (+ $l (- $arg2 1)) $arg2)
		loop a $arg2 [
			guilist [
				t = (min (+ $i $z) $l)
				while [< $i $t] [
					$arg1 = (at $arg3 $i)
					arg4
					i = (+ $i 1)
				]
			]
			if (&& (>= $numargs 5) (< (+ $a 1) $arg2)) [arg5]
		]
	]
]

entguitype = 0

drawentprops = [ //props, limits, offset
	offset = (? (>= $numargs 3) $arg3 0)
	loop i (listlen $arg1) [
		case $entguitype 0 [
			guilist [
				guitext (tabify (concatword (at $arg1 $i) ":") 3)
				guifield tmp@@(+ $offset $i) -20 [
					clamp tmp@@@i @@@(at $arg2 (* 2 $i)) @@@(at $arg2 (+ (* 2 $i) 1))
					entupdate
				]
			]
		] 1 [
			guitext (at $arg1 @i)
			guislider tmp@(+ $offset $i) @(at $arg2 (* 2 $i)) @(at $arg2 (+ (* 2 $i) 1)) [
				entupdate
			]
		]
	]
]

newentgui = [
	newgui $arg1 [
		guitext @arg1
		guibar

		drawentprops [ @@arg2 ] [ @@arg3 ]

		guitab typ
		guilistsplit n 2 $enttypelist [
			guibutton $n [entset @n]
		]
		guitab inne
		guicheckbox "Użyj suwaków" entguitype 1 0
		@quickeditmenu
	]
]

entupdate = [
	str = $tmpt;
	loop i (getattrnum $tmpt) [ str = (concat $str [$tmp@i])]
	do [entset @str]
]



setting_entediting = 1                                                          //Przejście Ye Olde tego potrzebuje

//KONIEC KOPIOWANIA, ROZPOCZNIJ geniusz Hirato

//Wszystkie aliasy, które będą używane w całym tekście

clamp = [alias $arg1 (max $arg2 (min $arg3 $$arg1))]		                //clamp (alias) (min) (max)		- dla liczb całkowitych
clampf = [alias $arg1 (maxf $arg2 (minf $arg3 $$arg1))]	                        //clampf (alias) (min) (max)		- dla liczb zmiennoprzecinkowych

loopix = "daysky"
skyboxes = "black dark desert dunes green hill nice"
amethyst7 = "starfield"
mayhem = "afterrain aqua4 aqua9 grouse prehistoric shattered trough"
penguins = "barren divine wrath"
vegastrike = "blue emerald fiery_galaxy mustard somered"

cloudboxen = "moon kenon_cloudbox"                                              //hehe... cloudboxen :D
numcloudlayers = 5

moviename = "Wstaw tutaj tytuł filmu i naciśnij przycisk aby rozpocząć nagrywanie"

//atrapy

masterterms = 0
newskypath = "skyboxes/black"

genskyitems = [
	guitext $arg2
	guistayopen [
		looplist f $arg1 [
			guibutton $f (format "%1 %2/%3" $arg3 $arg2 $f)
		]
	]
]

skyload = [
	if (>= (strstr "cloudbox skybox" (at $guirolloveraction 0)) 0) [
		guirolloveraction
	] [
		skybox $skybox
	]
]

showskyshot = [
	guistayopen [
		guilist [
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _ft) $skyload 4 1 data/sandboxlogo
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _rt) $skyload 4 1 data/sandboxlogo
		]
		guilist [
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _lf) $skyload 4 1 data/sandboxlogo
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _dn) $skyload 4 1 data/sandboxlogo
		]
		guilist [
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _bk) $skyload 4 1 data/sandboxlogo
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _up) $skyload 4 1 data/sandboxlogo
		]
	]
]



showentgui = [showquickgui]

bloomstrength = 0

pvssize = 32

skycol1 = 0
skycol2 = 0
skycol3 = 0
ambientcol1 = 0
ambientcol2 = 0
ambientcol3 = 0

multieffectname = circle
multieffectvalue = 0
multieffectreverse = 0

globalmaps = "ladder particleshowcase tutorial-mapchange tutorial-texanim tutorial-triggers "

maps = ""
mapindex = 0



createmaplist = [
	maps = ""
	testmaps = (concat $globalmaps $arg1)
	loopfiles f packages/base ogz [
		match = (>= (listfind t $testmaps [ strcmp $t $f ]) 0)

		if (= $match 0) [maps = (concat $maps (format "^"%1^""  $f))]   //^" obsługuje spacje w nazwach plików
	]

	loopdir d packages/base [
		loopfiles f (concatword "packages/base/" $d) ogz [
			match = (>= (listfind t $testmaps [ strcmp $t $f ]) 0)

			if (= $match 0) [maps = (concat $maps (format "^"%1/%2^"" $d $f))]
		]
	]
]

themes = ""
themenum = 0
themeidx = 0

createthemelist = [
	themes = ""                                                             // nie zapomnij tego wyzerować
	loopfiles f data/hud cfg [
		themes = (format "%1 ^"%2^"" $themes $f)
	]
	themenum = (listlen $themes)
]

crosshairlist = ""
crosshairnum = ""
crosshairs = "default"                                                          // zdefiniowane w grze
crosshairidx = 0                                                                // ten do ustawienia

createcrosshairlist = [
	crosshairlist = ""
	loopfiles f packages/crosshairs png [
		crosshairlist = (concat $crosshairlist (concatword "packages/crosshairs/" $f))
	]
	crosshairnum = (listlen $crosshairlist)
]

fonts = ""
fontnum = 0
fontidx = 0

createfontslist = [
	fonts = ""                                                              // nie zapomnij tego wyzerować
	loopfiles f packages/fonts cfg [
		fonts = (format "%1 ^"%2^"" $fonts $f)
	]
	fontnum = (listlen $fonts)
]

custommusidx = 0
custommusicnum = 0

entt = 0
enta1 = 0
enta2 = 0
enta3 = 0
enta4 = 0
enta5 = 0
enta6 = 0
enta7 = 0
enta8 = 0
dosearch0 = 1
dosearch1 = 1
dosearch2 = 1
dosearch3 = 1
dosearch4 = 1
dosearch5 = 1
dosearch6 = 1
dosearch7 = 1
dosearch8 = 1
doinsel = 0

findents = [
	match = 1
	if $doinsel [
		match = (* $match (if (= $doinsel 1) insel [! (insel)]))
	]
	if $dosearch0 [
		match = (* $match (strcmp (et) (at $enttypelist $entt)))
	]
	loop i (getatrnum (et)) [
		if $dosearch@(+ $i 1) [
			match = (* $match (= (ea $i) $enta@(+ $i 1)))
		]
	]

	result $match
]

col1 = 0
col2 = 0
col3 = 0
col21 = 0
col22 = 0
col23 = 0

newpartdir = 0
newpartstdtype = 3
newpartexpsize = 0
newpartfiretype = 0

newpartrad = 0
newpartfireheight = 0

newpartmulttype = 9
newpartmultlen = 0
newpartmulteffect = 0
newpartmultrev = 0
newpartmultvalue = 0
newpartmulteff = 0      // binarne, generuj za pomocą efektów lub kierunków

newpartbartype = 6
newpartbarprcnt = 0
newpartflaretype = 32
newpartsize = 0
newpartfade = 0
newparttag = 0

newpartgrav = 0
newpartvel = 0
newpartfade = 0
newpartmulteffcollide = 1

colfieldsa = [
	val1 = (concatword $arg1 "1")
	val2 = (concatword $arg1 "2")
	val3 = (concatword $arg1 "3")

	guifield $val1 -4 [ clamp @val1 0 255; alias @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val2 -4 [ clamp @val2 0 255; alias @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val3 -4 [ clamp @val3 0 255; alias @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
]

colfieldsb = [
	val1 = (concatword $arg1 "1")
	val2 = (concatword $arg1 "2")
	val3 = (concatword $arg1 "3")


	guifield $val1 -4 [ clamp @val1 0 255; @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val2 -4 [ clamp @val2 0 255; @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val3 -4 [ clamp @val3 0 255; @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
]

colfields = [
	if (>= $numargs 1) [
		val1 = (concatword $arg1 "1")
		val2 = (concatword $arg1 "2")
		val3 = (concatword $arg1 "3")
	] [
		val1 = "col1"
		val2 = "col2"
		val3 = "col3"
	]

	guifield $val1 -4 [ clamp @val1 0 255] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val2 -4 [ clamp @val2 0 255] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val3 -4 [ clamp @val3 0 255] (mergecollevels $$val1 $$val2 $$val3)
]

mapactionname = temp

lightrad = 0
lightr = 0
lightg = 0
lightb = 0
lightam = 1
lightatrset = [
	if (= $numargs 1) [
		lightrad = $arg1
	] [
		lightr = $arg1
		lightg = $arg2
		lightb = $arg3
	]
	cleargui 1
]

newmapsize = 10

MODE = 1

//Aliasy kolorów GUI

setcollevels = [
	(concatword $arg1 "1") = (>> (& $arg2 0xFF0000) 16)
	(concatword $arg1 "2") = (>> (& $arg2 0xFF00) 8)
	(concatword $arg1 "3") = (& $arg2 0xFF)
]

mergecollevels = [
	(| (| (<< $arg1 16) (<< $arg2 8)) $arg3)
]

notepadfile = "untitled.txt"

newgui notepad [
    guifield notepadfile -30
    showfileeditor $notepadfile -80 20
]

notepad = [
    if (> $numargs 0) [notepadfile = $arg1]
    showgui notepad
]

pastebuffer = [showgui pastebuffer]

scratchpad = [showgui scratchpad]

newbrushname = "logo"
newbrushpath = "data/sandboxlogo"

newgui keepconf [
	guitextbox "Dostępny jest plik konfiguracyjny dla innej wersji piaskownicy. Ustawienia zapisane w nich zostały zignorowane i zastosowano wartości domyślne; Zaleca się zachowanie wartości domyślnych. Ta wersja piaskownicy może zawierać nowe powiązania lub uszkodzone istniejące w twoim pliku konfiguracyjnym.^n^nCo chcesz zrobić?" 50 4
	guistrut 2
	guibutton "użyj starej konfiguracji (niezalecane)" [ignoreconfver 1; exec (format "config_%1.cfg" (getgame))]
	guibutton "zachowaj ustawienia domyślne (zalecane)" "cleargui"
]

////////////////
// TUTAJ START MENU
////////////////

newgui post [
	guistayopen [
		guibutton "(efekty WYŁ)"          "clearpostfx"
		guibar
		guilist [
			guilist [

				guibutton "rotoscope" "rotoscope 1"
				guibutton "rotoscope + rozmycie3" "rotoscope 1 1"
				guibutton "rotoscope + rozmycie5" "rotoscope 1 2"
				guibutton "negatyw" "setpostfx invert"
				guibutton "krawędzie"  "setpostfx sobel"
			]
			guibar
			guilist [
				guibutton "gbr"    "setpostfx gbr"
				guibutton "cz-b"     "setpostfx bw"
				guibutton "rozmycie3"  "setpostfx hblur3; addpostfx vblur3"
				guibutton "rozmycie5"  "setpostfx hblur5; addpostfx vblur5"

			]
		]
		guibar
		guibutton (format "bloom (%1%2)" $bloomstrength "%")    "bloom (divf $bloomstrength 100)"
		guislider bloomstrength -100 100
	]
] "Efekty przetwarzania końcowego"

brushmenu = [
	guititle "pędzle"
	guilist [ // diamenty
		guiimage "data/brush_1c.png" brush_0
		guiimage "data/brush_21c.png" brush_1
		guiimage "data/brush_421c.png" brush_2
	]
	guilist [ // kwadraty
		guiimage "data/brush_3s.png" brush_3
		guiimage "data/brush_5s.png" brush_4
		guiimage "data/brush_7s.png" brush_5
	]
	guititle smooth
	guilist [ // gładkie
		guiimage "data/brush_3s.png" brush_6
		guiimage "data/brush_5s.png" brush_7
		guiimage "data/brush_7s.png" brush_8
	]
]

quickeditmenu = [
	guibutton "Zapisz planszę" "showgui savemap"
	guibutton "Wczytaj planszę" "showgui loadmap"
	guibar
	guibutton "Uprość geometrię" "remip"
	guibutton "Napraw oświetlenie" "calclight -1"                           // guibutton "Przelicz odbicia" "recalc"
	guibar
	guibutton "Nowy obiekt" "newent light 64 240 200 150"
]

matmenu = [
	guibutton "bez materiału"     "air"  "" 0xFFFFFF
	guibutton "bariera"    "clip"            "" 0xFF0000
	guibutton "szkło"   "glass"           "" 0x00FFFF
	guibutton "lawa"    "lava"            "" 0xFFA700
	guibutton "bez bariery"  "noclip"          "" 0x00FF00
	guibutton "woda"   "water"           "" 0x0000FF
	guibutton "śmierć" "editmat respawn" "" 0x2E2E2E
	guibutton "przezroczystość"   "editmat alpha"   "" 0xAF3FAF
	guibutton "bariera dla SI"	"editmat aiclip"  "" 0xFFFF00
	guibar
	guicheckbox "Zaznaczaj Materiały (M)" showmat
]

newgui "console" [
	guitext "rozmiar konsoli (linie)"
	guislider consize
	guitext "filtr komunikatów konsoli:"
	guilist [
		guilist [
			guibitfield "ważne informacje" confilter 0x01
			guibitfield "ostrzeżenia" confilter 0x02
			guibitfield "błędy" confilter 0x04
			guibitfield "komunikaty odpluskwiania" confilter 0x08
			guibitfield "komunikaty wstępne" confilter 0x10
			guibitfield "komunikaty skryptów" confilter 0x20
		]
		guibar
		guilist [
			guibitfield "rozmowa" confilter 0x100
			guibitfield "rozmowa drużyny" confilter 0x200
			guibitfield "ważne zdarzenia w grze" confilter 0x400
			guibitfield "upadek w świecie" confilter 0x800
			guibitfield "upadek innych w świecie" confilter 0x1000
		]
	]
	guitext "rozmiar pełnej konsoli (procent ekranu)"
	guislider fullconsize
	guitext "filtr komunikatów pełnej konsoli:"
	guilist [
		guilist [
			guibitfield "ważne informacje" fullconfilter 0x01
			guibitfield "ostrzeżenia" fullconfilter 0x02
			guibitfield "błędy" fullconfilter 0x04
			guibitfield "komunikaty odpluskwiania" fullconfilter 0x08
			guibitfield "komunikaty wstępne" fullconfilter 0x10
			guibitfield "komunikaty skryptów" fullconfilter 0x20
		]
		guibar
		guilist [
			guibitfield "rozmowa" fullconfilter 0x100
			guibitfield "rozmowa drużyny" fullconfilter 0x200
			guibitfield "ważne zdarzenia w grze" fullconfilter 0x400
			guibitfield "upadek w świecie" fullconfilter 0x800
			guibitfield "upadek innych w świecie" fullconfilter 0x1000
		]
	]
] "konsola"

partmultieffectname = [
	cond [< $arg1 3] [
		multieffectname = "Kółko"                                       // kółko Circle
	] [< $arg1 6] [
		multieffectname = "Cylinder"                                    // cylinder - Cylinder Shell
	] [< $arg1 12] [
		multieffectname = "Stożek"                                      // stożek - Cone Shell
	] [< $arg1 15] [
		multieffectname = "Płaszczyzna"                                 // płaszczyzna - Plane Volume
	] [< $arg1 21] [
		multieffectname = "Ściana"                                      //  Line Volume (Wall)
	] [ 1 ] [
		multieffectname = "Kula"                                        // kula - Sphere
	]
]

showfileeditor = [
    guinoautotab [
        guieditor $arg1 $arg2 $arg3
        textinit $arg1 $arg1
        guistayopen [
            guilist [
                guibutton "ładuj" [textfocus @arg1; textmode 3; textload @arg1]
                guibar
                guibutton "zapisz" [textfocus @arg1; textsave @arg1]
                guibar
                guibutton "kopiuj" [textfocus @arg1; textcopy]
                guibar
                guibutton "wklej" [textfocus @arg1; textmode 3; textpaste]
                guibar
                guibutton "zaznacz całe" [textfocus @arg1; textselectall]
                guibar
                guibutton "czyść" [textfocus @arg1; textclear]
            ]
        ]
    ]
]

looplist e $enttypelist [
	newentgui $e "" ""
]

//cząstki i mapmodel są zadeklarowane gdzie indziej
newentgui light "promień czerwony zielony niebieski" "0 400 0 255 0 255 0 255"
newentgui spotlight "radius" "0 200"
newentgui playerstart "yaw tag" "0 360 0 10000"
newentgui envmap "radius size blur" "0 400 0 9 0 2"
newentgui sound "type radius size" "0 20 0 500 0 500"

newgui quit [
	guitext "Czy jesteś pewien, że chcesz wyjść?"
	guitext "Wszystkie zmiany, których nie zapisałeś zostaną UTRACONE."
	guistrut 1
	guibutton "Zapisz planszę" "savecurrentmap"
	guistrut 1
	guilist [
		guibutton "Nie, nie wychodź" "cleargui 1"
		guistrut 20
		guibutton "Tak, zakończ Sandbox" "quit" exit
	]
] "koniec?"

main = [
	guilist [
		if (= $editing 1) [
			guilist [
				guibutton "Nowa plansza"		"showgui newmap"
				guibutton "Zapisz planszę"		"showgui savemap"
				guibar
	 			guibutton "Nowa cząsteczka"	"showgui newparticles"
				guibutton "Nowe światło"	"showgui newlight"
				guibutton "Nowy model"	        "showgui mapmodels"
				guibutton "Znajdź Obiekty (F5)"	"showgui entfind"
				guibutton "Menu Edycji"		"showgui editing"
				guibutton "Menu Nieba (F4)"	"showgui skies"
				guibutton "Menu Materiałów"	"showgui materials"
				guibutton "Menu szybkiej edycji (F3)"	"showquickgui" "menu"
				guibutton "Menu tekstur (F2)"	"showtexgui" "menu"
			]
			guibar
		]
		guilist [
			guibutton "Przełącz tryb edycji (e)"	"edittoggle"
			guibutton "Wczytaj planszę"		"showgui maps; initmapgui"
			guibutton "Wczytaj planszę o nazwie..."	"showgui loadmap"
			guibutton "Gra wieloosobowa"		"showgui multiplayer"
			guibutton "Pomoc"		"showgui help"
			guibar
			guibutton "Opcje"		"showgui options"
			guibutton "Nagrywarka filmów"	"showgui recorder"
			guibutton "Szafa grająca"		"showgui jukebox"
			guistrut 1
			guibutton "Informacje..."		"showgui autorzy"
			guibutton "Koniec Gry"	[ if $mainmenu [quit] [showgui quit]]	exit
		]
	]
]

newgui main [
	@main
] "Główne menu"

newgui materials [
	@matmenu
] "materiały"

newgui recorder [
	guilist [
		guilist [
			guilist [
				guitext "Nazwa: "
				guifield moviename -15
			]
		]
		guistayopen [
			if (movierecording) [
				guiimage "data/stop" "movie" 2.5
			] [
				guiimage "data/record" "movie $moviename" 2.5
			]
		]
	]

	guicheckbox "Dźwięk" moviesound
	guicheckbox "Synchronizacja dzwięku i obrazu" moviesync

	guilist [
		guitext "Wymiary: "
		guifield moview 4
		guititle " x "
		guifield movieh 4
	]

	guitext "klatek/sek"
	guislider moviefps 1 100
	guistrut 1

	guitab "Zaawansowane"
	guicheckbox "Przyspieszenie" movieaccel
	guicheckbox "przyspieszenie Blit" movieaccelblit
	guicheckbox "przyspieszenie YUV" movieaccelyuv
] "Nagrywarka"

newgui setglare [
	guitext "Intensity			"
	guislider glarescale 0 20
	guitext "Size"
	guislider glaresize
	guitext "Blur Intensity	"
	guislider blurglare
	guitext "Blur Radius"
	guislider blurglaresigma
	guitext "Particle Glare"
	guislider particleglare
	guicheckbox "Affect Skybox?" skyboxglare
	guibar
	guibutton "Back" "cleargui 1"
]

newgui debugsettings [
	guicheckbox "Plamy cieni"			dbgblob
	guicheckbox "Tekstury DDS"			dbgdds
	guicheckbox "Naklejki"				dbgdec
	guicheckbox "Efekty głębi"			debugdepthfx
	guicheckbox "Tryby wyświetlania"			dbgmodes
	guicheckbox "Dynamiczne światła (stałą funkcją)"	dbgffdl
	guicheckbox "Blask"				debugglare
	guicheckbox "Trawa"				dbggrass
	guicheckbox "sumy CRC w Gzip"				dbggz
	guicheckbox "Zmienne plansz"			dbgvars
	guicheckbox "Nagrywanie filmu"			dbgmovie
	guicheckbox "Odtwarzanie muzyki"			dbgmusic
	guicheckbox "Rozszerzenia OpenGL"			dbgexts         // nie myśl, że jest to kiedykolwiek używane, z wyjątkiem uruchamiania
	guicheckbox "Cząsteczki"				debugparticles
	guicheckbox "Źródła cząstek"			dbgpseeds
	guicheckbox "Usuwanie źródła cząstek"		dbgpcull
	guitab "I jeszcze trochę rzeczy!"
	guicheckbox "Moduły cieniujące"				dbgshader
	guicheckbox "Odwzorowanie cieni"			debugsm
	guicheckbox "Odwzorowanie cieni (stałą funkcją)"	debugffsm
	guicheckbox "Odtwarzanie dźwięku"			dbgsound
	guicheckbox "Wczytywanie archiwów Zip Loading"			dbgzip
] "Przełącz rzeczy do odpluskwiania"

newgui editopts [
	guilist [
		guilist [
			guitext "Pokaż promień"
			guitext "Pokaż kierunek"
			guitext "Pokaż pomocniki"
			guitext "Pokaż pozycje"
		]
		guistrut 2
		guilist [
			guiradio "Nie" showentradius 0
			guiradio "Nie" showentdir 0
			guiradio "Nigdy" showenthelpers 0
			guiradio "Podczas edycji" showentities 0
		]
		guistrut 2
		guilist [
			guiradio "Gdy zaznaczone" showentradius 1
			guiradio "Gdy zaznaczone" showentdir 1
			guiradio "Tryb edycji" showenthelpers 1
			guiradio "Tryb edycji" showentities 1
		]
		guistrut 2
		guilist [
			guiradio "Gdy możliwe" showentradius 2
			guiradio "Gdy możliwe" showentdir 2
			guiradio "Zawsze" showenthelpers 2
			guiradio "Zawsze" showentities 2
		]
	]
	guistrut 1
	guilist [
		guilist [
			guicheckbox "zawsze dynamiczne światła" showdynlights
			guicheckbox "podgląd oświetlenie" "showlighting"
		]
		guistrut 2
		guilist [
			guicheckbox "wyświetlaj cząsteczki" editingparticles
		]
	]
	guistrut 1
	guitext "Wybierz tyb znacznika (domyślnie 5)"
	guislider entmarkertype

	guitab "Wygląd"
	guilist [
		guilist [
			guicheckbox "Tryb szkieletowy" wireframe
			guicheckbox "Pokazuj ramki ograniczające" showboundingbox
		]
		guititle "	"
		guilist [
			guicheckbox "Zaznaczaj testy głębokości" dtoutline
			guicheckbox "Pokazuj objętości materiałów" showmat
		]
	]
	guistrut 1
	guititle "Kontury"
	guilist [
		guistayopen [
			guitext "kolor konturu: "
			guibutton "poprzedni" "changeoutline -1"
			guistrut 1
			guicolor $outlinecolour
			guistrut 1
			guibutton "następny" "changeoutline 1"
		]
	]
	guilist [
		guitext "własny kolor: "
		guifield outlinecolour  10
	]
	guitab "Edycja"
	guilist [
		guicheckbox "Tryb odwzorowywania wysokości (H)" hmapedit
	]
	guicheckbox "Zastosuj zmianę tekstury do wszystkich ścian (0)" allfaces
	guicheckbox "Rozmiar kratki pasuje do zaznaczenia" gridlookup
	guistrut 1
	guitext "Rozmiar kratki (G + kółko)"
	guislider gridsize
] "Obiekty"

newgui jukebox [
	guitext "aby stworzyć własną listę utworów, umieść swoje utwory w katalogu"
	guitext "^f0packages/mymusic/"
	guitext "Użytkownicy Windows mogą również użyć ^f0my_stuff/packages/mymusic"
	guitext "Użytkownicy Linux mogą również użyć ^f0~/.platinumarts/packages/mymusic"
	guistrut 1
	guititle "Głośność"
	guislider musicvol
	guititle "Tryb odtwarzania"
	guiradio "Losowo" playmode 0
	guiradio "Pętla" playmode 1
	guiradio "Kolejno" playmode 2

	guitab "Domyślne"
	guistayopen [
		loop i (listlen $basesonglist) [
			guibutton (at $basesonglist $i) [
				music $guirollovername (format "playasong %1" @i)
			]
		]
	]
	guitab "Własna muzyka"
	clamp custommusicidx 0 (- $custommusicnum (- $guiautotab 1))
	guistayopen [
		guibutton "Odśwież" updatecustomsonglist
		guilist [
			if (< (- $guiautotab 1)  $custommusicnum) [
				guislider custommusicidx 0 (- $custommusicnum (- $guiautotab 1)) "" "" 1
				guibar
			]
			guilist [
				loop i (min (- $guiautotab 1) $custommusicnum) [
					guibutton (at $customsonglist (+ $custommusicidx $i)) [
						music (format "mymusic/%1" (at $customsonglist (+ @i $custommusicidx))) (format "playasong %1" (+ (listlen $basesonglist) (+ @i $custommusicidx)))
					]
				]
			]
		]
	]
] "Szafa grająca"

newgui multiplayer [
	guitextbox (format "Aktualny rodzaj gry (^fs^f0%1^fr) nie obsługuje trybu wieloosobowego. Jeśli tak nie jest, utwórz manu o nazwie ^"multiplayer^" wewnątrz ^fs^f0data/%1/menus.cfg^fr" (getgame)) 52
] "Gra wieloosobowa"

newgui newmap [
	guititle "Nowa plansza"
	guitext "Wybierz rozmiar poniżej i naciśnij przcisk 'nowa plansza'."
	guislider newmapsize 10 16
	guibar
	guibutton "Nowa plansza" "newmap $newmapsize"
	] "nowa plansza"

newgui newlight [
	guitext (concat "Promień	" $lightrad) light
	guitext (concat "Red	" $lightr) lightr
	guitext (concat "Green	" $lightg) lightg
	guitext (concat "Blue	" $lightb) lightb
	guibar
	guistayopen [
		guibutton "Ustaw Światło" [newent light $lightrad $lightr $lightg $lightb] light
	]
	guibutton "Wybierz Kolor" "showgui newlight2"
	guibutton "Wybierz Promień" "showgui newlight3"
	guitab "Dodatkowe"
	guilist [
		guitext "Ilość: " lights
		guifield lightam 5
	]
	guitext "Promień" light
	guislider lightrad 0 200
	guitext "Czerwony" lightr
	guislider lightr 0 255
	guitext "Zielony" lightg
	guislider lightg 0 255
	guitext "Niebieski" lightb
	guislider lightb 0 255
	guibar
	guibutton "Ustaw Światło(a)" [loop i $lightam [newent light $lightrad $lightr $lightg $lightb]] light
] "nowe światło"

newgui newlight2 [
	guibutton "Słońce"		"lightatrset 255 224 192"
	guibutton "Czerwone"		"lightatrset 255 0 0"
	guibutton "Zielone"	"lightatrset 0 255 0"
	guibutton "Niebieskie"	"lightatrset 0 0 255"
	guibutton "Żółte"	"lightatrset 255 255 0"
	guibutton "Różowe"	"lightatrset 255 0 255"
	guibutton "Błękitne"	"lightatrset 0 255 255"
	guibutton "Białe"	"lightatrset 255 255 255"
	guibutton "Pomarańczowe"	"lightatrset 255 127 0"
] "wybierz kolor światła"

newgui newlight3 [
	guibutton "Nieskończone (Słońce)"	"lightatrset 0"
	guibutton "Bardzo krótkie"		"lightatrset 8"
	guibutton "Krótkie"		"lightatrset 32"
	guibutton "Średnie"		"lightatrset 64"
	guibutton "Średnio-długie"	"lightatrset 96"
	guibutton "Długie"		"lightatrset 128"
	guibutton "Bardzo długie"		"lightatrset 256"
	guibutton "Bardzo bardzo długie"	"lightatrset 512"
	guibutton "Super długie"	"lightatrset 1024"
] "wybierz zasięg światła"

newgui savemap [
	guitext "Wprowadź nazwę planszy"
	guifield mapactionname -20
	guibar
	guibutton (format "Zapisz aktualną planszę jako: %1" $mapactionname) "savemap $mapactionname"
	guibutton "Wróć" "cleargui 1"
] "Zapisz planszę"

newgui loadmap [
	guitext "Wprowadź nazwę planszy i naciśnij Enter"
	guifield mapactionname -20
	guibar
	guibutton (format "Ładuj %1" $mapactionname) "map $mapactionname"
	guibutton "Wróć" "cleargui 1
] "Wczytaj planszę"

newgui autorzy [
	guitext "Plantinum Arts Sandbox, Cube 2 dla dzieci."
	guitext "Twórca: Michael Tomaino"
	guitext "Programiści: Kevin Meyer, Thomas Achtner, Dale Weiler i Ilyas Gasanov"
	guitext "Grafik: Richard Honeycutt"
	guitext "http://www.SandboxGameMaker.com"
	guitext "Platinum Arts Sandbox jest produktem Platinum Arts LLC"
	guitext (format "Wersja: %1" $version)

	guitab "Silnik graficzny"
	guitext "Silnik Cube 2."
	guitext "Twórca: Wouter van Oortmerssen."
	guitext "Aktualne utrzymianie: Lee Salzman i Robert Pointon"

	guitab "Testerzy"
	guitext "Ci ludzie nieustannie zgłaszają problemy, bez nich"
	guitext "PAS nie byłby tak wspaniały, jak jest teraz. Wielkie dzięki!"
	guitext "linuxdonald, Clownfish "

	guitab "Podziękowania!"
	guitext "Specjalne podziękowania dla wszystkich artystów, których dźwięków i faktur używamy."
	guitext "Bez nich PAS nie wyglądałby ani nie brzmiałby tak fantastycznie,"
	guitext "i wielkie podziękowania za pobranie i wsparcie"
] "Autorzy"

newgui resolution [
	guistayopen [
		guilist [
			guilist [
				guibutton "320x240"              "screenres 320 240" (if (&& (= $scr_w 320) (= $scr_h 240)) [result "radio_on"] [result "radio_off"])
				guibutton "640x480"              "screenres 640 480" (if (&& (= $scr_w 640) (= $scr_h 480)) [result "radio_on"] [result "radio_off"])
				guibutton "800x600"              "screenres 800 600" (if (&& (= $scr_w 800) (= $scr_h 600)) [result "radio_on"] [result "radio_off"])
				guibutton "1024x768"             "screenres 1024 768" (if (&& (= $scr_w 1024) (= $scr_h 768)) [result "radio_on"] [result "radio_off"])
				guibutton "1152x864"             "screenres 1152 864" (if (&& (= $scr_w 1152) (= $scr_h 864)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x960"             "screenres 1280 960" (if (&& (= $scr_w 1280) (= $scr_h 960)) [result "radio_on"] [result "radio_off"])
			]
			guibar
			guilist [
				guibutton "1400x1050"            "screenres 1400 1050" (if (&& (= $scr_w 1400) (= $scr_h 1050)) [result "radio_on"] [result "radio_off"])
				guibutton "1600x1200"            "screenres 1600 1200" (if (&& (= $scr_w 1600) (= $scr_h 1200)) [result "radio_on"] [result "radio_off"])
				guibutton "1792x1344"            "screenres 1792 1344" (if (&& (= $scr_w 1792) (= $scr_h 1344)) [result "radio_on"] [result "radio_off"])
				guibutton "1856x1392"            "screenres 1856 1392" (if (&& (= $scr_w 1856) (= $scr_h 1392)) [result "radio_on"] [result "radio_off"])
				guibutton "1920x1440"            "screenres 1920 1440" (if (&& (= $scr_w 1920) (= $scr_h 1440)) [result "radio_on"] [result "radio_off"])
				guibutton "2048x1536"            "screenres 2048 1536" (if (&& (= $scr_w 2048) (= $scr_h 1536)) [result "radio_on"] [result "radio_off"])
			]
			guibar
			guilist [
				guibutton "1024x640"             "screenres 1024 640" (if (&& (= $scr_w 1024) (= $scr_h 640)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x720"             "screenres 1280 720" (if (&& (= $scr_w 1280) (= $scr_h 720)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x768"             "screenres 1280 768" (if (&& (= $scr_w 1280) (= $scr_h 768)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x800"             "screenres 1280 800" (if (&& (= $scr_w 1280) (= $scr_h 800)) [result "radio_on"] [result "radio_off"])
				guibutton "1440x900"             "screenres 1440 900" (if (&& (= $scr_w 1440) (= $scr_h 900)) [result "radio_on"] [result "radio_off"])
				guibutton "1600x1000"            "screenres 1600 1000" (if (&& (= $scr_w 1600) (= $scr_h 1000)) [result "radio_on"] [result "radio_off"])
			]
			guibar
			guilist [
				guibutton "1680x1050"            "screenres 1680 1050" (if (&& (= $scr_w 1680) (= $scr_h 1050)) [result "radio_on"] [result "radio_off"])
				guibutton "1920x1080"            "screenres 1920 1080" (if (&& (= $scr_w 1920) (= $scr_h 1080)) [result "radio_on"] [result "radio_off"])
				guibutton "1920x1200"            "screenres 1920 1200" (if (&& (= $scr_w 1920) (= $scr_h 1200)) [result "radio_on"] [result "radio_off"])
				guibutton "2048x1280"            "screenres 2048 1280" (if (&& (= $scr_w 2048) (= $scr_h 1280)) [result "radio_on"] [result "radio_off"])
				guibutton "2560x1600"            "screenres 2560 1600" (if (&& (= $scr_w 2560) (= $scr_h 1600)) [result "radio_on"] [result "radio_off"])
				guibutton "3840x2400"            "screenres 3840 2400" (if (&& (= $scr_w 3840) (= $scr_h 2400)) [result "radio_on"] [result "radio_off"])
			]
		]
	]
] "Rozdzielczość"

newgui crosshairs [
	guilist [
		loop i (listlen $crosshairs) [
			guiradio (at $crosshairs $i) crosshairidx $i
			guistrut 1
		]
	]
	guistrut 1
	guilist [
		guitext "Aktualny: "
		guistayopen [ guiimage (getcrosshair $crosshairidx) [echo (getcrosshair $crosshairidx) ] .5 0]
	]
	guistrut 1

	guistayopen [
		loop i (div (+ 7 $crosshairnum) 8) [
			guilist [
				loop j (min 8 (- $crosshairnum (* $i 8))) [
					idx = (+ (* $i 8) $j)
					guiimage (at $crosshairlist $idx) [loadcrosshair @(at $crosshairlist $idx) @crosshairidx] 1 0
				]
			]
		]
	]
] "celowniki"



newgui fonts [
	clamp fontidx 0 (- $fontnum $guiautotab)
	guistayopen [
		guilist [
			guilist [
				loop i (min $fontnum $guiautotab) [
					fontindex = (+ $fontidx $i)
					guibutton (at $fonts $fontindex) (concat setfont (at $fonts $fontindex))
				]
			]
			guislider fontidx 0 (- $fontnum $guiautotab) "" 0 1
			guibar
			guifont $guirollovername [
				guitextbox "abcdefghijklmnopqrstuvwxyz^nABCDEFGHIJKLMNOPQRSTUVWXYZ^n`1234567890-=[]\;',./^n~!@#$%^^&*(){}:^"<>?" 40
			]
		]
	]

	guitab "Informacja"
	guitextbox "Jeśli chcesz zastąpić domyślną czcionkę, dodaj ^"^fs^f0setfont myfont^fr^" do swojego pliku ^fs^f0autoexec.cfg^fr." 40
] "Czcionki"

newgui options [
	guibutton "Motywy menu" "showgui themes; createthemelist"
	guibutton "Ustaw celowniki" "showgui crosshairs; createcrosshairlist"
	guibutton "Ustaw Czcionki" "showgui fonts; createfontslist"
	guilist [
		guibutton "Zmień kolory Menu" "showgui setguicol"
		guibar
		guistayopen [
			guibutton "Wyzeruj kolory" guiresetcolours
		]
	]
	guibutton "Informacje na Konsoli" "showgui console"
	guibutton "Ustawienia odpluskwiania" "showgui debugsettings"


	guistrut 1
	guibutton "Przywróć wartości domyślne" "setdefaults"
	guibutton "PageUp i PageDown jako przybliżenie" [bind PAGEUP [universaldelta -1]; bind PAGEDOWN [universaldelta 1]]

	guitab "Dźwięk"
	guilist [
		guilist [
			guicheckbox "stereo				" stereo
			guitext "Głośność dzwięku"
			guitext "Głośność muzyki"
			guitext "Częstotliwość dzwięku"
			guitext "Kanały dzwięku"
			guitext "Długość bufora dzwięku"
		]
		guilist [
			guicheckbox "Dzwięk kierunkowy			" mumble
			guislider soundvol
			guislider musicvol
			guilistslider soundfreq "8000 16000 22050 32000 44100"
			guislider soundchans
			guilistslider soundbufferlen "128 256 512 768 1024 1280 1536 1792 2048 2304 2560 2816 3072 3328 3584 3840 4096"
		]
	]

	guitab "Grafika"

	guinoautotab [
		guilist [
			guicheckbox "Cieniowanie	" shaders
			if $shaders [
				guiradio "Bardzo małe" shaderdetail 0
				guistrut 1
				guiradio "Małe" shaderdetail 1
				guistrut 1
				guiradio "Średnie" shaderdetail 2
				guistrut 1
				guiradio "Duże" shaderdetail 3

			]
		]
		guibutton "Efekty po obróbce" "showgui post"
		guistrut 1

		guilist [
			guicheckbox "Naklejki		" decals
			if $decals [
				guiradio "Średnie zanikanie" decalfade 10000 [maxdecaltris 1024]
				guistrut 2
				guiradio "Szybkie zanikanie" decalfade 60000 [maxdecaltris 4096]
			]
		]
		guilist [
			guicheckbox "Soft Particles	" depthfx               // efekty głębi?
			if $depthfx [
				guiradio "Low" depthfxsize 7 [depthfxrect 0; depthfxfilter 1; blurdepthfx 1]
				guistrut 2
				guiradio "Medium" depthfxsize 10 [depthfxrect 1; depthfxfilter 0; blurdepthfx 0]
				guistrut 2
				guiradio "High" depthfxsize 12 [depthfxrect 1; depthfxfilter 0; blurdepthfx 0]
			]
		]
		if (&& (= $renderpath 0) (>= $maxtmus 3)) [
			guicheckbox "Dynlights" ffdynlights 5 0
		]
		if (> $renderpath 0) [
			guicheckbox "Dynlights" maxdynlights 5 0
		]
		guilist [
			guicheckbox "Odbicie Szkła	" glassenv
			guiradio "Małe"    envmapsize 4
			guistrut 2
			guiradio "Średnie" envmapsize 7
			guistrut 2
			guiradio "Mocne"   envmapsize 10
		]
		guilist [
			guicheckbox "Trawa		" grass
			if $grass [
				guiradio "Blisko"   grassdist 128
				guistrut 2
				guiradio "Średnio"  grassdist 256
				guistrut 2
				guiradio "Daleko"   grassdist 512
			]
		]
		guilist [
			glarepreset = 0
			if (= $glarescale 1) [
				if (= $blurglare 4) [glarepreset = 1]
				if (= $blurglare 7) [glarepreset = 3]
			]
			if (= $glarescale 2) [
				if (= $blurglare 3) [glarepreset = 2]
				if (= $blurglare 7) [glarepreset = 4]
			]

			guicheckbox "Blask		" glare
			if $glare [
				guiradio "subtelny" glarepreset 1 [blurglare 4; glarescale 1]
				guistrut 2
				guiradio "świecący" glarepreset 2 [blurglare 3; glarescale 2]
				guistrut 2
				guiradio "miękki" glarepreset 3 [blurglare 7; glarescale 1]
				guistrut 2
				guiradio "mocny" glarepreset 4 [blurglare 7; glarescale 2]
			]
		]
		guilist [
			guicheckbox "Rozmycie ruchu	" motionblur
			if $motionblur [
				guiradio "słabe" motionblurscale 0.5
				guistrut 2
				guiradio "średnie" motionblurscale 0.65
				guistrut 2
				guiradio "mocne" motionblurscale 0.8
			]
		]
		guilist [
			guicheckbox "Rzut cienia	" shadowmap
			if $shadowmap [
				guiradio "Mały" shadowmapsize 7 [blurshadowmap 1]
				guistrut 2
				guiradio "Średni" shadowmapsize 9 [blurshadowmap 1]
				guistrut 2
				guiradio "Duży" shadowmapsize 11 [blurshadowmap 2]
			] [
				guicheckbox "Plamy" blobs
			]
		]
		guilist [
			guitext "Modele	"
			guicheckbox "Wypukłości" bumpmodels
			guistrut 2
			guicheckbox "Blask" glowmodels
			guistrut 2
			guicheckbox "Odbicia" envmapmodels
			guistrut 2
			guicheckbox "Światła" lightmodels
		]
		guilist [
			guitext "Woda	"
			guicheckbox "Odbicia" waterenvmap
			guistrut 1
			guicheckbox "Zanikanie" waterfade
			guistrut 1
			guicheckbox "Załamanie" waterrefract
			guistrut 1
			guicheckbox "Animacja" vertwater
		]
		guilist [
			guistrut 10
			guicheckbox "Odbicia" waterreflect
			guistrut 2
			guiradio "Małe" reflectsize 6
			guistrut 2
			guiradio "Średnie" reflectsize 8
			guistrut 2
			guiradio "Duże" reflectsize 10
		]

		guilist [
			guitext "Wodospad	"
			guicheckbox "Mapa otoczenia" waterfallenv
			guistrut 1
			guicheckbox "Załamanie" waterfallrefract
		]
	]

	guitab "Wyświetlanie"

	guibutton "Wybierz rozdzielczość" "showgui resolution"
	guilist [
		guitext "Rozdzielczość: "
		guifield scr_w -5
		guititle " x " $guitextcolour
		guifield scr_h -5
	]
	guistrut 1
	guilist [
		guilist [
			guicheckbox "synchronizacja pionowa			" vsync
			guitext "Rozjaśnienie"
			guitext "Anty-postrzępienie"
			guitext "Filtrowanie kierunkowe"
			guitext "Głębia koloru"
		]
		guistrut 1
		guilist [
			guicheckbox "Pełny ekran			" fullscreen
			guislider gamma
			guilistslider fsaa "0 1 2 4 8 16"
			guilistslider aniso "0 1 2 4 8 16"
			guilistslider colorbits "0 8 16 32"
		]
	]

	guitab "Różne"
	guitext "Menu"
	guilist [
		guicheckbox "Menu dwuwymiarowe		" gui2d
		guicheckbox "Kliknij aby wybrać menu" guiclicktab
	]
	guistrut 1
	guitext "Myszka"
	guilist [
		guicheckbox "Odwróć oś Y	" invmouse
		guitext "Czułość: "
		guifield sensitivity
	]
	guitab "Gra"

	gameoptions
] "Opcje"

gameoptions = [
	guitext "Brak opcji do konfiguracji"
]

newgui blendmaps [
	guitext (format "Pędzel: %1" (getblendbrushname (curblendbrush)))
	guistayopen [ guilist [
		guibutton "cofnij" "nextblendbrush -1"
		guistrut 4
		guibutton "dalej" "nextblendbrush 1"
	]]
	guistrut 1
	guitext "Tryb malowania mieszającego"
	n = (listlen $paintmodes)
	loop i (+ (div $n 3) 1) [
		guilist [
			loop j 3 [
				if (< (+ (* $i 3) $j) $n) [
					if $j [guistrut 2]
					guiradio (at $paintmodes (+ (* $i 3) $j)) blendpaintmode (+ (* $j 3) $i) [hmapedit 0]
				]
			]
		]
	]
	guistrut 1
	guilist [
		guitext "Nazwa:	"
		guifield newbrushname -20
	]
	guilist [
		guitext "Ścieżka:	"
		guifield newbrushpath -20
	]
	guistayopen [
		guibutton "Dodaj powyższy pędzel" "addblendbrush $newbrushname $newbrushpath"
		guibutton "Usuń powyższy pędzel" "delblendbrush $newbrushname"
		guistrut 1
		guibutton "Wygeneruj podgląd" "showblendmap"
		guistrut 1
		guibutton "Wyczyść mapę mieszania" "clearblendmap"
	]
] "mapy mieszania"

newgui editing [
	guilist [
		guilist [
			guibutton "Nowy Model (F1)"                 "showgui mapmodels"
			guibutton "Pokaż menu tekstur (F2)"         "showtexgui"           "menu"
			guibutton "Pokaż menu szybkiej edycji (F3)" "showquickgui"         "menu"
			guibutton "Niebo (F4)"                      "showgui skies"        skybox
			guibutton "Znajdź obiekty (F5)"             "showgui entfind"
			guibutton "Mapy Mieszania"                  "showgui blendmaps"
			guibutton "Opcje trybu edycji"              "showgui editopts"
			guibutton "Nowe Cząsteczki"                 "showgui newparticles"
			guibutton "Nowe Światło"                    "showgui newlight"     "lights"
		]
		guititle "	"
		guilist [
			guibutton "Kopiuj (C)"     "editcopy"
			guibutton "Kopiuj obiekty" "entcopy"
			guibutton "Wklej (V)"      "editpaste"
			guibutton "Wklej obiekty"  "entpaste"
			guibutton "Tryb wypukłości (H)" [hmapedit (! $hmapedit); blendpaintmode 0]
		]
	]
	guitab "Obiekty"
	guilistsplit n 2 $enttypelist [
		guibutton (concatword "Nowy obiekt typu [" $n "]") [ newent @n ]
	]

	guitab "Mieszanie"

	guitext (concat Brush: (getblendbrushname (curblendbrush)))
	guistayopen [guilist [
		guibutton "Poprzedni" [nextblendbrush -1]
		guistrut 10
		guibutton "Następny" [nextblendbrush 1]
	]]
	guistrut 1
	guistayopen [
		guibutton "obróć pędzel mieszający" "rotateblendbrush"
		guibutton "wyczyść całą mapę mieszania" "clearblendmap"
		guibutton "wyczyść mapę mieszania w zaznaczeniu" "clearblendmapsel"
	]
	guistrut 1
	guitext "Tryb pracy"
	guiradio "wyłączone" blendpaintmode 0
	guiradio "podmiana" blendpaintmode 1
	guiradio "kopanie" blendpaintmode 2
	guiradio "wypełnianie" blendpaintmode 3
	guiradio "odwrotne kopanie" blendpaintmode 4
	guiradio "odwrotne wypełnianie" blendpaintmode 5

	guitab "Mapy oświetlenia"

	guilist [
		guistayopen [
			guibutton "Wysoka jakość" "calclight 1"
			guibutton "(łatanie)" "patchlight 1"
			guistrut 4
			guibutton "Niska jakość" "calclight -1"
			guibutton "(łatanie)" "patchlight -1"
		]
	]
	guistrut 1

	guilist [
		guitext "Anty Postrzępienie:	"
		guifield lmaa -6
		guititle (concatword "	" (at "1x 2x 4x 8x" $lmaa)) $guitextcolour
	]
	guilist [
		guitext "Cienie:		"
		guifield lmshadows -6
		guititle (concatword "	" (at "Off Simple Alpha-Blended" $lmshadows)) $guitextcolour
	]
	guilist [
		guistayopen [
			guibutton "Przelicz powyższe ustawienia	" calclight
			guibutton "(łatanie)" "patchlight"
		]
	]
	guistrut 1

	guilist [
		guitext "Rozmyte mapy oświetlenia:	"
		guifield blurlms -6;
	]
	guilist [
		guitext "Rozmycie światła nieba:	"
		guifield blurskylight -6
	]
	guilist [
		guitext "Precyzja:		"
		guifield lightprecision -6
	]
	guilist [
		guitext "Błąd:		"
		guifield lighterror -6
	]
	guilist [
		guitext "Wątki:		"
		guifield lightthreads -6
	]
	guistrut 1

	guilist [
		guilist [
			guitext "Kolory światła nieba"
			setcollevels skycol $skylight
			guilist [colfieldsb skycol skylight []]
		]
		guistrut 6
		guilist [
			guitext "Kolory otoczenia"
			setcollevels ambientcol $ambient
			guilist [colfieldsb ambientcol ambient []]
		]
	]

	guitab "PVS"
	guistayopen [
		guibutton "Oblicz Zestaw Potencjalnie Widocznych" "genpvs $pvssize"
		guibutton "Wyczyść dane Zestawu Potencjalnie Widocznych" "clearpvs"
		guibutton "Generuj komórkę testową" "testpvs"
		guibutton "Pokaż Statystykę" "pvsstats"
		guibutton "Zablokuj komórkę" "lockpvs (! $lockpvs)"
	]
	guistrut 1
	guilist [
		guitext "Rozmiar komórki:	"
		guifield pvssize -8 [clamp pvssize 8 4096]
	]
	guilist [
		guitext "Wątki:	    "
		guifield pvsthreads -8
	]
	guitab cfg
	guitext (mapcfgname)
	showfileeditor (mapcfgname) -50 11
] "edycja"

newgui mapmodels [
	itemsnum = (* 2 $guiautotab)
	loop i (+ (div (nummapmodels) $itemsnum) (if (mod (nummapmodels) $itemsnum) 1 0)) [
		if $i [guitab (+ $i 1)]
		guilist [
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (* $i $itemsnum))) [
					num = (+ $j (* $i $itemsnum))
					guibutton (mapmodelname $num) (format "newent mapmodel %1" $num)
				]
			]
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (+ (* $i $itemsnum) $guiautotab))) [
					num = (+ $j (+ (* $i $itemsnum) $guiautotab))
					guibutton (mapmodelname $num) (format "newent mapmodel %1" $num)
				]
			]
		]
	]
] "modele"

newgui mapmodel [
	guitext $tmpt
	setcollevels col $tmp5
	guibar

	drawentprops "Direction Model ^"Trigger Type^" ^"Trigger Tag^" Radius" [0 360 0 @(- (nummapmodels) 1) 0 29 -200 200 0 1000]
	guilist [
		guitext (tabify "Kolor (RGB):" 3)
		colfieldsa col tmp5 entupdate
	]

	guitab "Opcje"
	guicheckbox "Suwaki" entguitype 1 0
	@quickeditmenu

	guitab "Modele
	itemsnum = (* 2 $guiautotab)
	loop i (+ (div (nummapmodels) $itemsnum) (if (mod (nummapmodels) $itemsnum) 1 0)) [
		if $i [guitab (+ $i 3)]
		guilist [
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (* $i $itemsnum))) [
					num = (+ $j (* $i $itemsnum))
					guibutton (mapmodelname $num) (format "tmp1 =  %1; entupdate" $num)
				]
			]
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (+ (* $i $itemsnum) $guiautotab))) [
					num = (+ $j (+ (* $i $itemsnum) $guiautotab))
					guibutton (mapmodelname $num) (format "tmp1 =  %1; entupdate" $num)
				]
			]
		]
	]
] "Model"

newgui particles [
	cond [&& (<= $tmp0 2) (>= $tmp0 0)] [
		curpart = 1
		setcollevels col $tmp3

		guilist [
			guiradio "Ogień + Dym" tmp0 0 [entupdate]
			guibar
			guiradio "Ogień" tmp0 1 [entupdate]
			guibar
			guiradio "Dym" tmp0 2 [entupdate]
		]

		guibar
		drawentprops "Radius Height" [0 5000 0 5000] 1
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			colfieldsa col tmp3 entupdate
		]
		drawentprops "Size Speed Fade Gravity" [0 10000 -10000 10000 0 60000 -2000 2000] 4

	] [|| (= $tmp0 3) (= $tmp0 4)] [
		curpart = 2
		guilist [
			guiradio "Dym" tmp0 3 [entupdate]
			guibar
			guiradio "Fontanna" tmp0 4 [entupdate]
		]
		guibar
		drawentprops "Direction Radius Fade Size Gravity" [ 0 5 0 10000 0 60000 0 10000 -2000 2000 ] 1
	] [= $tmp0 5] [
		curpart = 3
		setcollevels col $tmp2
		drawentprops "Size" [-5 100] 1
		guilist [
			guitext (tabify "Kolor (RGB):" 3)
			colfieldsa col tmp2 entupdate
		]
	] [|| (= $tmp0 6) (= $tmp0 7)] [
		curpart = 4
		setcollevels col $tmp2
		setcollevels col2 $tmp3
		guilist [
			guiradio "Normal style" tmp0 6 [entupdate]
			guibar
			guiradio "Versus style" tmp0 7 [entupdate]
		]
		drawentprops "^"Captured Percentage^"" [0 100] 1
		guilist [
			guitext (tabify "Kolor (RGB):" 3)
			colfieldsa col tmp2 entupdate
		]
		guilist [
			guitext (tabify "Kolor2 (RGB):" 3)
			colfieldsa col2 tmp3 entupdate
		]
	] [= $tmp0 8] [
		curpart = 5
		setcollevels col $tmp2
		drawentprops "Tag" [ 0 10000 ] 1
		guilist [
			guitext (tabify "Kontents:" 3)
			guifield part_text_@tmp1 -18
		]
		guilist [
			guitext (tabify "Kolor (RGB):" 3)
			colfieldsa col tmp2 entupdate
		]
		drawentprops "Rozmiar" [0 10000] 3
	] [&& (>= $tmp0 9) (<= $tmp0 15)] [
		setcollevels col $tmp3
		curpart = 6

		guilist [
			guilist [
				guiradio "Flare" tmp0 9 [entupdate]
				guiradio "Lightning" tmp0 10 [entupdate]
			]
			guibar
			guilist [
				guiradio "Ogień" tmp0 11 [entupdate]
				guiradio "Dym" tmp0 12 [entupdate]
			]
			guibar
			guilist [
				guiradio "Woda" tmp0 13 [entupdate]
				guiradio "Śnieg" tmp0 14 [entupdate]
			]
			guibar
			guilist [
				guiradio "Liście" tmp0 15 [entupdate]
			]
		]
		guibar
		if (> $tmp1 255) [
			multieffectreverse = (& $tmp1 32)
			multieffectvalue = (& $tmp1 31)
			partmultieffectname $multieffectvalue

			guilist [
				guistayopen [ guibutton "Use Direction" [tmp1 = (rnd 6); entupdate] ]
				guibar
				guistayopen [ guicheckbox "Reverse" multieffectreverse 32 0 [tmp1 = (| 256 (| $multieffectvalue $multieffectreverse )); entupdate] ]
			]
			guitext $multieffectname
			guilist [
				guitext (tabify "Efekty: " 3)
				guifield multieffectvalue -18 [ clamp multieffectvalue 0 0x1F; tmp1 = (| 256 (| $multieffectvalue $multieffectreverse)); entupdate]
			]
			guistrut 1
		 ] [
			guistayopen [guibutton "Use Effects" [tmp1 = (+ 256 (rnd 64)); entupdate]]
			drawentprops "Kierunek" [0 5] 1
			guistrut 2
		]
		drawentprops "Długość" [0 10000] 2
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			colfieldsa col tmp3 entupdate
		]
		drawentprops "^"Fade Time^" Size Velocity Gravity" [-60000 60000 0 10000 -10000 10000 -2000 2000 ] 4
	] [&& (>= $tmp0 32) (<= $tmp0 35)] [
		curpart = 7
		guilist [
			guilist [
				guiradio "Normal" tmp0 32 [entupdate]
				guiradio "Normal W/ Sparkle" tmp0 33 [entupdate]
			]
			guilist [
				guiradio "Fixed" tmp0 34 [entupdate]
				guiradio "Fixed W/ Sparkle" tmp0 35 [entupdate]
			]
		]
		guibar
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			guifield tmp1 -4 [clamp tmp1 0 255; entupdate] (mergecollevels $tmp1 $tmp2 $tmp3)
			guibar
			guifield tmp2 -4 [clamp tmp2 0 255; entupdate] (mergecollevels $tmp1 $tmp2 $tmp3)
			guibar
			guifield tmp3 -4 [clamp tmp3 0 255; entupdate] (mergecollevels $tmp1 $tmp2 $tmp3)
		]
		drawentprops "Size" [0 10000] 4
	]

	guitab type

	guiradio "Ogień"       curpart 1 [tmp0 = (at "0 1 2" (rnd 3)); entupdate]
	guiradio "Zwykłe"   curpart 2 [tmp0 = (at "3 4" (rnd 2)); entupdate]
	guiradio "Eksplozje"  curpart 3 [tmp0 = 5; entupdate]
	guiradio "Paski"       curpart 4 [tmp0 = (at "6 7" (rnd 2)); entupdate]
	guiradio "Teksty"       curpart 5 [tmp0 = 8; entupdate]
	guiradio "Efekty"     curpart 6 [tmp0 = (at "9 10 11 12 13 14 15" (rnd 7)); entupdate]
	guiradio "Błyski soczewek" curpart 7 [tmp0 = (at "32 33 34 35" (rnd 4)); entupdate]

	guitab ent
	guilistsplit n 2 $enttypelist [
		guibutton $n [ entset @n ]
	]

	guitab misc
	guicheckbox "Używaj suwaków" entguitype 1 0
	@quickeditmenu
]

newgui quickedit [
	@quickeditmenu
	guitab "materiały"
	@matmenu
] "menu szybkiej edycji"

newgui heightfield [
	@brushmenu
	guitab "inNe"
	@quickeditmenu
] "mapa wysokości"

newgui skies [
	guitext (format "Aktualny ObszarNieba:	0%1" $skybox)
	guitext (format "Aktualny ObszarChmur:	0%1" $cloudbox)
	guitext (format "Aktualna WarstwaChmur:	0%1" $cloudlayer)
	guistrut 4
	guilist [
		guitext "Ścieżka: "
		guifield newskypath -50
	]
	guistrut 1
	guistayopen [
		guibutton "Zastosuj jako ObszarNieba"     [skybox $newskypath]
		guibutton "Zastosuj jako ObszarChmur"   [cloudbox $newskypath]
		guibutton "Zastosuj jako WarstwaChmur" [cloudlater $newskypath]
	]

	guitab "ObaszaryNieba"
	guilist [
		guilist [
			genskyitems $loopix loopix skybox
			genskyitems $amethyst7 amethyst7 skybox
			genskyitems $skyboxes skyboxes skybox
			genskyitems $penguins penguins skybox

		]
		guibar
		showskyshot
		guibar
		guilist [
			genskyitems $vegastrike skyboxes/vs skybox
			genskyitems $mayhem mayhem skybox
		]
	]

	guitab "ObszaryChmur"
	guilist [
		guilist [
			guibutton "Pusty" "cloudbox ^"^"" skybox
			genskyitems $cloudboxen clouds cloudbox
		]
		guibar
		showskyshot
	]

	guitab "WarstwyChmur"
	guilist [
		guistayopen [
			guilist [
				guibutton "Pusta" "cloudlayer ^"^"" skybox
				loop i $numcloudlayers [
					guibutton (concatword "clouds " (+ $i 1)) (format "cloudlayer clouds/clouds%1" (+ $i 1))
				]
			]
			guibar
			guiimage (format "<scale:128,128>packages/%1" (at $guirolloveraction 1)) $skyload 4 1 data/sandboxlogo
		]
	]

	guitab "Ustawienia"

	guilist [
		guilist [
			guititle "Pola nieba"
			guilist [
				guitext "Obroty:		"
				guifield spinsky -8
			]
			guilist [
				guitext "Azymut:		"
				guifield yawsky -8
			]

			guistrut 1
			guitext "Kolor (RGB)"
			guilist [
				setcollevels skycol $skyboxcolour
				colfieldsb skycol skyboxcolour []
			]
			guistrut 1
			guititle "Kopuła mgły"
			guilist [
				guicheckbox "Pokrywa:		" fogdomecap    // pokrywać lub spowijać
				guifield fogdomecap -8
			]
			guilist [
				guitext "Bariera:		"
				guifield fogdomeclip -8
			]
			guilist [
				guitext "Wysokość:	"
				guifield fogdomeheight -8
			]
			guilist [
				guitext "Minimum:		"
				guifield fogdomemin -8
			]
			guilist [
				guitext "Maksimum:		"
				guifield fogdomemax -8
			]
			guistrut 1
			guitext "Kolor (RGB)"
			guilist [
				setcollevels fdcol $fogdomecolour
				colfieldsb fdcol fogdomecolour []
			]
		]
		guibar
		guilist [
			guititle "ObszaryChmur"
			guilist [
				guitext "Przejrzystość:	"
				guifield cloudboxalpha -8
			]
			guilist [
				guitext "Bariera chmur:		"
				guifield cloudclip -8
			]
			guilist [
				guitext "Obroty:		"
				guifield spinclouds -8

			]
			guilist [
				guitext "Azymut:		"
				guifield yawclouds -8
			]
			guistrut 1
			guitext "Kolor (RGB)"
			guilist [
				setcollevels cloudcol $cloudboxcolour
				colfieldsb cloudcol cloudboxcolour []
			]
		]
		guibar
		guilist [
			guititle "WarstwyChmur"
			guilist [
				guitext "Przejrzystość:	"
				guifield cloudalpha -8
			]
			guilist [
				guitext "Przyciemnienie:		"
				guifield cloudfade -8
			]
			guilist [
				guitext "Pułap:	"
				guifield cloudheight -8
			]
			guilist [
				guitext "Skala:	"
				guifield cloudscale -8
			]
			guilist [
				guitext "Przewijanie-X:	"
				guifield cloudscrollx -8
			]
			guilist [
				guitext "Przewijanie-Y:	"
				guifield cloudscrolly -8
			]
			guilist [
				guitext "Obroty:		"
				guifield spincloudlayer -8
			]
			guilist [
				guitext "Azymut:		"
				guifield yawcloudlayer -8
			]
			guistrut 1
			guitext "Kolor (RGB)"
			guilist [
				setcollevels "layercol" $cloudcolour
				colfieldsb layercol cloudcolour []
			]
		]
	]
] "Nieba"

newgui entfind [
	guitext "Ustaw poniżej poszukiwane atrybuty"
	guicheckbox "Typ (patrz następna zakładka)" dosearch0
	loop i 8 [
		guilist [
			guicheckbox (format "atrybut %1	" (+ $i 1)) [dosearch@(+ $i 1)]
			guifield [enta@(+ $i 1)] 11 [clamp [enta@(+ $i 1)] -0x7FFFFFFF 0x7FFFFFFF]
		]
	]

	guilist [
		guiradio "wył" doinsel 0
		guistrut 2
		guiradio "wewnątrz zaznaczenia" doinsel 1
		guistrut 2
		guiradio "poza zaznaczeniem" doinsel 2
	]

	guibar
	guistayopen [
		guibutton "Skopiuj atrybuty z aktualnie zaznaczonego obiektu" [
			loop i 8 [
				if (strcmp (ea $i) "") [
					[enta@(+ $i 1)] = 0
				] [
					[enta@(+ $i 1)] = (ea $i)
				]
			]
			loop i (listlen $enttypelist) [
				if (strcmp (et) (at $enttypelist $i)) [
					entt = $i
				]
			]
		]
	]
	guibar

	guistayopen [
		guibutton "zaznacz wszystkie pasujące obiekty" [entselect [(findents)]]
	]

	guitab Typ
	guilist [
		loop i (+ (div (listlen $enttypelist) 10) 1) [
			guilist [
				loop j (min (- (listlen $enttypelist) (* 10 $i)) 10) [
					guiradio (at $enttypelist (+ $j (* $i 10))) entt (+ $j (* $i 10))
				]
			]
		]
	]
] "Znajdź obiekt"

newgui newparticles [
	guibutton "Utwórz Ogień/Dym" "newent particles $newpartfiretype $newpartrad $newpartfireheight (mergecollevels $col1 $col2 $col3) $newpartsize $newpartvel $newpartfade $newpartgrav"
	guibar
	guilist [
		guiradio "Płomień + Dym" newpartfiretype 0
		guibar
		guiradio "Płomień" newpartfiretype 1
		guibar
		guiradio "Dym" newpartfiretype 2
	]
	guibar
	guilist [
		guitext (tabify "Strefa/Promień:" 3)
		guifield newpartrad -18 [ clamp newpartrad 0 5000 ]
	]
	guilist [
		guitext (tabify "Wysokość:" 3)
		guifield newpartfireheight -18 [ clamp newpartfireheight 0 5000 ]
	]
	guilist [
		guitext (tabify "Kolor (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Rozmiar:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
	guilist [
		guitext (tabify "Prędkość:" 3)
		guifield newpartvel -18 [clamp newpartvel -10000 10000]
	]
	guilist [
		guitext (tabify "Zanik:" 3)
		guifield newpartfade -18 [clamp newpartfade 0 60000]
	]
	guilist [
		guitext (tabify "Grawitacja:" 3)
		guifield newpartgrav -18 [clamp newpartgrav -2000 2000]
	]

	guitab "Zwykłe"
	guibutton "Utwórz" "newent particles $newpartstdtype $newpartdir $newpartradius $newpartfade $newpartsize $newpartgrav"
	guibar
	guilist [
		guiradio "Dym" newpartstdtype 3
		guibar
		guiradio "Fontanna" newpartstdtype 4
	]
	guibar

	guilist [
		guitext (tabify "Kierunek:" 3)
		guifield newpartdir -18 [ clamp newpartdir 0 5]
	]
	guilist [
		guitext (tabify "Promień:" 3)
		guifield newpartrad -18 [ clamp newpartrad 0 5000 ]
	]
	guilist [
		guitext (tabify "Zanik:" 3)
		guifield newpartfade -18 [clamp newpartfade 0 60000]
	]
	guilist [
		guitext (tabify "Rozmiar:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
	guilist [
		guitext (tabify "Grawitacja:" 3)
		guifield newpartgrav -18 [clamp newpartgrav -2000 2000]
	]

	guitab "Eksplozja"
	guibutton "Utwórz" "newent particles  5 $newpartexpsize (mergecollevels $col1 $col2 $col3)"
	guibar
	guilist [
		guitext (tabify "Rozmiar:" 3)
		guifield newpartexpsize -18 [ clamp newpartexpsize -5 1000 ]
	]
	guilist [
		guitext (tabify "Kolor (RGB):" 3)
		colfields col
	]

	guitab "Paski
	guibutton "Utwórz" "newent particles $newpartbartype $newpartbarprcnt (mergecollevels $col1 $col2 $col3) (mergecollevels $col21 $col22 $col23)"
	guibar
	guilist [
		guiradio "Zwyczajnie" newpartbartype 6
		guibar
		guiradio "Odwrotnie" newpartbartype 7
	]
	guibar
	guitext "Procenty"
	guislider newpartbarprcnt 0 100
	guilist [
		guitext (tabify "Kolor (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Kolor2 (RGB):" 3)
		colfields col2
	]

	guitab "Tekst"
	guibutton "Utwórz" "newent particles 8 $newparttag (mergecollevels $col1 $col2 $col3) $newpartsize"
	guibar

	guilist [
		guitext (tabify "Znacznik:" 3)
		guifield newparttag -18 [ clamp newparttag 0 10000 ]
	]
	guilist [
		guitext (tabify "Treść:" 3)
		guifield part_text_@newparttag -40
	]
	guilist [
		guitext (tabify "Kolor (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Rozmiar:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]

	guitab "Efekty"
	guibutton "Utwórz" "newent particles $newpartmulttype $newpartmultvalue $newpartmultlen (mergecollevels $col1 $col2 $col3) (* $newpartfade $newpartmulteffcollide) $newpartsize $newpartvel $newpartgrav"
	guibar
	guilist [
		guilist [
			guiradio "Raca" newpartmulttype 9
			guiradio "Błyskawica" newpartmulttype 10
		]
		guibar
		guilist [
			guiradio "Ogień" newpartmulttype 11
			guiradio "Dym" newpartmulttype 12
		]
		guibar
		guilist [
			guiradio "Śnieg" newpartmulttype 14
			guiradio "Woda" newpartmulttype 13
		]
		guibar
		guilist [
			guiradio "Liście" newpartmulttype 15
		]
	]
	guibar
	if $newpartmulteff [
		guilist [
			guicheckbox "Użyj efektów" newpartmulteff 1 0 [newpartmultvalue = (rnd 6)]
			guibar
			guicheckbox "Odwrotne" newpartmultrev 32 0
			guistrut 1
			guicheckbox "Zderzanie" newpartmulteffcollide -1 1
		]
		guibar
		guilist [
			guitext (tabify "Efekty:" 3)
			guifield newpartmulteffect -18 [ newpartmulteffect = (& $newpartmulteffect 0x1F) ]
			guistrut 5
			guitext $multieffectname
			partmultieffectname $newpartmulteffect
		]
		newpartmultvalue = (|  256 (| $newpartmulteffect $newpartmultrev))
	] [
		guicheckbox "Użyj efektów" newpartmulteff
		guibar
		guilist [
			guitext (tabify "Kierunek:" 3)
			guifield newpartmultvalue -18 [ clamp newpartvalue 0 5 ]
		]
	]

	guilist [
		guitext (tabify "Długość:" 3)
		guifield newpartmultlen -18 [ clamp newpartmultlen 0 10000 ]
	]
	guilist [
		guitext (tabify "a:" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Zanik:" 3)
		guifield newpartfade -18 [clamp newpartfade 0 60000]
	]
	guilist [
		guitext (tabify "Rozmiar:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
	guilist [
		guitext (tabify "Szybkość:" 3)
		guifield newpartvel -18 [clamp newpartvel -10000 10000]
	]
	guilist [
		guitext (tabify "Grawitacja:" 3)
		guifield newpartgrav -18 [clamp newpartgrav -2000 2000]
	]

	guitab "Rozbłysk soczewkowy"
	guibutton "Utwórz" "newent particles $newpartflaretype $col1 $col2 $col3 $newpartsize"
	guibar
	guilist [
		guiradio "Zwykły" newpartflaretype 32
		guibar
		guiradio "Zwykły z iskrą" newpartflaretype 33
		guibar
		guiradio "Stały" newpartflaretype 34
		guibar
		guiradio "Stały z iskrą" newpartflaretype 35
	]
	guibar
	guilist [
		guitext (tabify "Kolor (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Rozmiar:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
] "Ogień"

testcheckbox = 0
testradio = 0
testfield = "pole"
testslider = 0

newgui setguicol [
	guilist [
		guitext (tabify "Kolor tytułu:" 4)
		setcollevels titlecol $guititlecolour
		colfieldsb titlecol guititlecolour
	]
	guilist [
		guitext (tabify "Kolor oznaczenia:" 4)
		setcollevels rollcol $guirollovercolour
		colfieldsb rollcol guirollovercolour
	]
	guilist [
		guitext (tabify "Kolor tekstu:" 4)
		setcollevels textcol $guitextcolour
		colfieldsb textcol guitextcolour
	]
	guilist [
		guitext (tabify "Kolor przycisku:" 4)
		setcollevels buttoncol $guibuttoncolour
		colfieldsb buttoncol guibuttoncolour
	]
	guilist [
		guitext (tabify "Kolor pola wyboru:" 4)
		setcollevels checkcol $guicheckboxcolour
		colfieldsb checkcol guicheckboxcolour
	]
	guilist [
		guitext (tabify "Kolor suwaka:" 4)
		setcollevels slidercol $guislidercolour
		colfieldsb slidercol guislidercolour
	]

	guistrut 1
	guititle "Tytuł"
	guitext "Tekst"
	guitextbox "Pole tekstowe"
	guistayopen [guibutton "Akcja" "echo Pomocy! Jestem naciśniętym przyciskiem!"]
	guifield testfield
	guicheckbox "pole wyboru" testcheckbox
	guilist [
		guiradio "opcja 0" testradio 0
		guistrut 1
		guiradio "opcja 1" testradio 1
	]
	guislider testslider 0 100

] "Kolory Menu"

newgui themes [
	clamp themeidx 0 (- $themenum $guiautotab)
	guistayopen [
		guilist [
			guilist [
				loop i (min $themenum $guiautotab) [
					index = (+ $themeidx $i)
					guibutton (at $themes $index) (format "exec data/hud/%1.cfg" (at $themes $index))
				]
			]
			guibar
			guislider themeidx 0 (- $themenum $guiautotab) "" 0 1
			guibar
			guiimage (concatword "data/hud/" $guirollovername) $guirolloveraction (divf $guiautotab 2) 1 data/sandboxlogo
		]
	]
] "Motywy menu"

newgui pastebuffer [
    guinoautotab [
        guieditor "#pastebuffer" -80 20
        guistayopen [
            guilist [
                guibutton "wykonaj" [textfocus "#pastebuffer"; textexec]
                guibar
                guibutton "czyść" [textfocus "#pastebuffer"; textclear]
            ]
        ]
    ]
]

showfileeditor = [
    guinoautotab [
        guieditor $arg1 $arg2 $arg3
        guistayopen [
            guilist [
                guibutton "wczytaj" [textfocus @arg1; textload @arg1]
                guibar
                guibutton "zapisz" [textfocus @arg1; textsave @arg1]
                guibar
                guibutton "wykonaj" [textfocus @arg1; textexec]
                guibar
                guibutton "kopiuj" [textfocus @arg1; textcopy]
                guibar
                guibutton "wklej" [textfocus @arg1; textpaste]
                guibar
                guibutton "zaznacz" [textfocus @arg1; textselectall]
                guibar
                guibutton "czyść" [textfocus @arg1; textclear]
            ]
        ]
    ]
]

newgui scratchpad [
    guinoautotab [
        guieditor "#scratchpad" -80 20
        guistayopen [
            guilist [
                guibutton "wykonaj" [textfocus "#scratchpad"; textexec]
                guibar
                guibutton "kopiuj" [textfocus "#scratchpad"; textcopy]
                guibar
                guibutton "wklej" [textfocus "#scratchpad"; textpaste]
                guibar
                guibutton "zaznacz" [textfocus "#scratchpad"; textselectall]
                guibar
                guibutton "czyść" [textfocus "#scratchpad"; textclear]
            ]
        ]
    ]
]

newgui help [
	guititle "Menu pomocy"
	guibar
	guibutton "funkcje klawiszy" "showgui keybinds"
] "pomoc"

universalbindsnk = [
"Prawy klik - Podskok"
"Kółko myszy - Zbliżenie"
"Spacja - Podskok"
"Shift - Przełącznik Shift"
"CTRL - Przełącznik Control"
"9 - przełącza pierwszą/trzecią osobę"
"W / góra - naprzód"
"A / lewo - w lewo"
"S / dół - wstecz"
"D / prawo - w prawo"
"T - otwiera linię poleceń"
"~/Ukośnik - otwiera linię poleceń ze znakiem /"
"E - przełącza tryb edycji"
"- (KP) - przewija konsolę o 1 linię w górę"
"+ (KP) - przewija konsolę o 1 linię w dół"
"F1 - Pauza"
"F11 - przełącza konsolę"
"F12 - robi zrzut ekranu"
"ESC - pokazuje główne menu lub wraca"
]

universalbindsc = [
"E - Pokazuje menu szybkiej edycji"
"- (KP) - przewija konsolę o 20 w górę"
"+ (KP) - przewija konsolę o 20 w dół"
"F12 - robi zrzut ekranu bez Informacji Ekranowych"
"ESC - zamyka Menu"
"9 - Widok z punktu widzenia pierwszej osoby"
]

universalbindss = [
"E - Pokazuje menu tekstur"
"- (KP) - przewija konsolę o 5 w górę"
"+ (KP) - przewija konsolę o 6 w dół"
"9 - Widok z puntu widzenia trzeciej osoby"
]

universalbindssc = [
"E - Edycja pliku konfiguracji mapy"
"- (KP) - przewija konsolę o 1000 w górę"
"+ (KP) - przewija konsolę o 1000 w dół"
"9 - Swobodne obroty"
]

fpsbinds = [
"0 - Cyklicznie wymień model gracza"
"I - (Kpina) Taunt"
"TAB - Pokazuje punktację"
]

sspbinds = [
"W / góra - Skok"
"A / lewo - ruch lewo/dół"
"S / dól - przełącz osie (chwilowo)"
"D / prawo - ruch prawo/góra"
]

rpgbinds = [
	"1-0  - Klawisze funkcyjne 1-10"
	"F6 - Szybki zapis"
	"F9 - Szybki odczyt"
	"E - użyj"
	"F1 - Przełącz tryb edycji"
]

krsbinds = [nic]

moviebinds = [
"0 - własności gracza"
"Q - odtwarza animację"
"góra - patrz w górę"
"lewo - patrz w lewo"
"dół - patrz w dół"
"prawo - patrz w prawo"
]

universaleditbindsnk = [
"lewy klik - zaznacz lub maluj mapę mieszjącą"
"prawy klik - rozszerz zaznaczenie lub obrót mapy mieszającej"
"środkowy klik - zaznacz narożniki"
"przewiń kółkiem - edycja geometrii lub wybór pędzla mieszającego"
"B/J - przewija przez pędzle wypukłości (kółko)"
"C - kopia"
"F - pchnij/ciągnij ściankę (kółko)"
"G - zmień rozmiar kratki (kółko)"
"H - przełącz tryb wypukłości"
"K - wyliczanie świateł słabe"
"L - przełącz pełne oświetlenie"
"M - przełącz klatki materiałów"
"N/Enter (blok Num) - wybierz obiekty w zaznaczeniu"
"P - cyklicznie tryby malowania mieszającego"
"Q - pchaj narożnik (kółko)"
"R - obracaj (kółko)"
"U/Z - Cofnij"
"V - Wklej"
"Y - tekstury cyklicznie (kółko)"
"1 - atrybut 1 obiektu (kółko)"
"2 - atrybut 2 (kółko)"
"3 - atrybut 3 (kółko)"
"4 - atrybut 4 (kółko)"
"5 - atrybut 5 (kółko)"
"F2 - Pokaż menu tekstur"
"F3 - Szybka edycja"
"F4 - Nieba"
"F5 - Znajdź obiekt"
"F6 - edycja pliku konfiguracji mapy"
"F7 - opcje trybu edycji"
", - obiekty cyklicznie (kółko)"
". - edycja obiektu"
"Backspace/Del - usuń"
"= - dodaje 50 do prędkości latania"
"- - ujmuje 50 od prędkości latania"
]

universaleditbindsc = [
"C - kopia"
"K - wyliczanie świateł dokładne"
"N - nowa mapa"
"P - wyłącz malowanie mieszające"
"V - wklej"
"X - przerzuć geometrię"
"Y - Ponów"
"Z - Cofnij"
"backspace/del - usuń wszystko w zaznaczeniu"
"= - dodaje 100 do prędkości latania"
"- - ujmuje 100 od prędkości latania"
]

universaleditbindss = [
"C - ustaw materiał jako  barierę"
"G - ustaw materiał jako szkło"
"K - Wyliczanie świateł normalne"
"L - Lawa"
"N - ustaw materiał jako bez bariery"
"R - ustaw materiał jako śmierć"
"Y - Pokaż menu tekstur"
"1 - przełącz podglądy dynamicznych świateł"
"2 - przełącz zaznaczenie testowania głębokości"
"3 - przełącz podglądy świateł"
"4 - przełącz informacje ekranowe"
"5 - przełącz podglądy cząsteczek"
"6 - przełącz klejenie się obiektów"
"7 - przełącz kontury geometrii"
"8 - przełacz tryb szkieletowy"
"0 - przełącz teksturowanie wszystkich ścian"
"= - dodaje 10 do prędkości latania"
"- - ujmuje 10 od prędkości latania"
]

universaleditbindssc = [
"K - najlepsze wyliczenie świateł"
"Z - ponów"
"= - prędkość latania 1000"
"- - prędkość latania 10"
]

fpseditbinds = [nic]

sspeditbinds = [nic]

rpgeditbinds = [
	"F1 - Przełącz tryb edycji"
]

krseditbinds = [nic]

movieeditbinds = [
"9 - dodaj aktora"
]

newgui keybinds [
	guititle "Klawisze w grze - pamiętaj, że pierwszeństwo mają przypisania specyficzne dla planszy."
	guilist [
		guilist [
			guititle "(bez klawiszy zmieniających)"
			loop i (listlen $universalbindsnk) [
				guitext (at $universalbindsnk $i)
			]
		]
		guilist [
			guititle "(z klawiszem SHIFT)"
			loop i (listlen $universalbindss) [
				guitext (at $universalbindss $i)
			]
			guititle "(z klawiszem CTRL)"
			loop i (listlen $universalbindsc) [
				guitext (at $universalbindsc $i)
			]
			guititle "(z klawiszami CTRL + SHIFT)"
			loop i (listlen $universalbindssc) [
				guitext (at $universalbindssc $i)
			]
			guititle (format "(przypisania modułu %1)" (getgame))
			loop i (listlen $[@(getgame)binds]) [
				guitext (at $[@(getgame)binds] $i)
			]
		]
	]
	guitab "klawisze edycji 1"
	//eek!
	guititle "(bez klawiszy zmieniających)"
	guilist [
		n = (listlen $universaleditbindsnk)                             // zabawne, o ile szybszy i czystszy jest dzięki temu skrypt
		loop i 2 [
			guilist [
				loop j (min (- $n (* $i (div $n 2))) (div $n 2)) [
					guitext (at $universaleditbindsnk (+ $j (* (div $n 2) $i)))
				]
			]
		]
	]
	guitab "klawisze edycji 2"
	guilist [
		guilist [
			guititle "(z klawiszem CTRL)"
			loop i (listlen $universaleditbindsc) [
				guitext (at $universaleditbindsc $i)
			]
			guititle "(z klawiszami CTRL + SHIFT)"
			loop i (listlen $universaleditbindssc) [
				guitext (at $universaleditbindssc $i)
			]
			guititle (format "(przypisania modułu %1)" (getgame))
			loop i (listlen $[@(getgame)editbinds]) [
				guitext (at $[@(getgame)editbinds] $i)
			]
		]
		guilist [
			guititle "(z klawiszem SHIFT)"
			loop i (listlen $universaleditbindss) [
				guitext (at $universaleditbindss $i)
			]
		]
	]
] "funkcje klawiszy"

